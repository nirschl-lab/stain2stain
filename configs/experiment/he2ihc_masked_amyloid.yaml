# @package _global_

# to execute this experiment run:
# python train.py experiment=example

defaults:
  - override /data: paired_data_mask_he_amyloid
  - override /model: conditional_flow_matching_masked
  - override /callbacks: default
  - override /trainer: default

# all parameters below will be merged with parameters from default configurations set above
# this allows you to overwrite only specified parameters
name: "conditional_he_amyloid_masked"
WANDB_PROJECT: "stain2stain"
tags: ["dev"]

seed: 12345

base_lr: 1e-4
batch_size: 8

trainer:
  min_epochs: 20
  max_epochs: 50
  accelerator: "cuda"
  strategy: "ddp"
  devices: 4
  # log_every_n_steps: 2
  # limit_train_batches: 5
  # limit_val_batches: 2


model:
  optimizer:
    lr: ${base_lr}
    weight_decay: 1e-3
  log_images: false

data:
  batch_size: ${batch_size}
  num_workers: 8

logger:
  wandb:
    project: "${WANDB_PROJECT}"
    tags: ${tags}
    group: "Training"
    name: ${name}
    log_model: True
  aim:
    experiment: ""

callbacks:
  early_stopping:
    monitor: "val/loss"
    patience: 20
    mode: "min"
    min_delta: 0.005