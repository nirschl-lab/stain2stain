# @package _global_

# to execute this experiment run:
# python train.py experiment=example

defaults:
  - override /data: paired_pos_neg_he_amyloid
  - override /model: conditional_flow_matching
  - override /callbacks: default
  - override /trainer: default

# all parameters below will be merged with parameters from default configurations set above
# this allows you to overwrite only specified parameters
name: "pos_neg_he_amyloid"
WANDB_PROJECT: "stain2stain"
tags: ["dev"]

seed: 12345

base_lr: 1e-4
batch_size: 8

trainer:
  min_epochs: 10
  max_epochs: 50
  accelerator: "cuda"
  strategy: "ddp"
  devices: 4
  # limit_train_batches: 51  # for quick testing
  # limit_val_batches: 51    # for quick testing

model:
  optimizer:
    lr: ${base_lr}
    weight_decay: 1e-3

data:
  batch_size: ${batch_size}
  num_workers: 32

logger:
  wandb:
    project: "${WANDB_PROJECT}"
    tags: ${tags}
    group: "Training"
    name: ${name}
  aim:
    experiment: ""

callbacks:
  early_stopping:
    monitor: "val/loss"
    patience: 20
    mode: "min"
    min_delta: 0.005